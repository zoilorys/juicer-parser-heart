$(function(){function n(n){var t=$("<div>",{"class":"heart-item"}),e=$("<a>",{href:n.external,target:"_blank"}),a=$("<img>",{src:n.image,alt:n.message});return t.append(e.append(a))[0]}function t(n){for(var t={},e=0,a=9,r=0,i=1;a>=i;i++)r=Math.ceil(n.length*w[a][i]),t[i]=n.slice(e,e+r),e+=r;var o=$("<div>",{"class":"heart-item"})[0];return t[1].splice(Math.ceil(t[1].length/2),0,$.clone(o),$.clone(o)),t[2].splice(Math.ceil(t[2].length/2),0,$.clone(o)),t}function e(n){var t=$("#juicer-heart");t.fadeOut(400,function(){t.empty().append.apply(t,n).fadeIn(600)})}function a(n){var t=$("<div>",{"class":"heart-row"});return t.append.apply(t,n)}function r(n){e(n)}function i(n){var t=Object.keys(n).map(function(t){return a(n[t])});e(t)}function o(n){switch(g){case 0:r(a(n));break;case 1:i(t(n));break;default:throw new Error("Unknown application state: "+g)}}function c(t){return t.map(n)}function u(n,t){$.ajax({url:"https://juicer.io/api/feeds/heart",data:{page:1,search:n||void 0,per:80},crossDomain:!0,dataType:"jsonp"}).done(function(n){t(null,n)}).fail(t)}function f(n){u($("#juicer-search-input").val(),n)}function l(){f(function(n,t){n?console.log("Error: ",n):o(c(t.posts.items))})}function p(n){if(g!==n){if("number"!=typeof n)throw new Error('State must be type "Number", instead got '+typeof n);if(!b[n])throw new Error('Unable to set state "'+b[n]+'" state: No state with index '+n+" found!");g=n,l()}}function s(){$("#juicer-search-button").on("click",function(n){n.preventDefault(),l()})}function h(){$("#juicer-heart-button").on("click",function(n){n.preventDefault(),p(1)}),$("#juicer-row-button").on("click",function(n){n.preventDefault(),p(0)})}function d(){$("#juicer-search-input").on("keyup",function(n){n.preventDefault(),13===n.which&&l()})}function v(){s(),d(),h()}function m(){l(),v()}var w={9:{1:.09,2:.12,3:.14,4:.16,5:.14,6:.12,7:.09,8:.06,9:.02}},b=["row","heart"],g=1;m()});
