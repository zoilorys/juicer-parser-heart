$(function(){function e(e){var t=$("<div>",{"class":"heart-item"}),n=$("<a>",{href:e.external,target:"_blank"}),a=$("<img>",{src:e.image,alt:e.message});return t.append(n.append(a))[0]}function t(e){for(var t={},n=0,a=9,r=0,i=1;a>=i;i++)r=Math.ceil(e.length*v[a][i]),t[i]=e.slice(n,n+r),n+=r;var o=$("<div>",{"class":"heart-item"})[0];return t[1].splice(Math.ceil(t[1].length/2),0,$.clone(o),$.clone(o)),t[2].splice(Math.ceil(t[2].length/2),0,$.clone(o)),t}function n(e){console.log(e);var t=$("#juicer-heart"),n=$("<div>",{"class":"heart-row"});t.fadeOut(400,function(){t.empty().append.apply(t,n.append.apply(n,e)).fadeIn(600)})}function a(e){var t=$("#juicer-heart"),n=($("<div>"),Object.keys(e).map(function(t){var n=$("<div>",{"class":"heart-row"});return n.append.apply(n,e[t])}));t.fadeOut(400,function(){t.empty().append.apply(t,n).fadeIn(600)})}function r(e){switch(w){case 0:n(e);break;case 1:a(t(e));break;default:throw new Error("Unknown application state: "+w)}}function i(t){return t.map(e)}function o(e,t){$.ajax({url:"https://juicer.io/api/feeds/heart",data:{page:1,search:e||void 0,per:80},crossDomain:!0,dataType:"jsonp"}).done(function(e){t(null,e)}).fail(t)}function c(e){o($("#juicer-search-input").val(),e)}function u(){c(function(e,t){e?console.log("Error: ",e):r(i(t.posts.items))})}function p(e){if(w!==e){if("number"!=typeof e)throw new Error('State must be type "Number", instead got '+typeof e);if(!m[e])throw new Error('Unable to set state "'+m[e]+'" state: No state with index '+e+" found!");w=e,u()}}function f(){$("#juicer-search-button").on("click",function(e){e.preventDefault(),u()})}function l(){$("#juicer-heart-button").on("click",function(e){e.preventDefault(),p(1)}),$("#juicer-row-button").on("click",function(e){e.preventDefault(),p(0)})}function s(){$("#juicer-search-input").on("keyup",function(e){e.preventDefault(),13===e.which&&u()})}function h(){f(),s(),l()}function d(){u(),h()}var v={9:{1:.09,2:.12,3:.14,4:.16,5:.14,6:.12,7:.09,8:.06,9:.02}},m=["row","heart"],w=1;d()});
